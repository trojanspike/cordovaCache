!function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return f={create:!0,exclusive:!1},e="codova_cache",i={set:!1,passTest:!1,_entry:null,password:null,content:{},write:function(a,b){return i._entry.createWriter(function(c){return c.onwriteend=function(){return b()},c.write(a)})},encrypt:function(a){return CryptoJS.AES.encrypt(a,i.password).toString()},decrypt:function(a){return CryptoJS.AES.decrypt(a,i.password).toString(CryptoJS.enc.Utf8)}},m=!1,l=null,j=null,h=null,g={write:function(a,b){return j.createWriter(function(c){return c.position=0,c.onwriteend=function(){return h=a,b(a)},c.write(a)})},read:function(a){return j.file(function(b){var c;return c=new FileReader,c.onloadend=function(b){return a(b)},c.readAsText(b)})}},k=function(b){return a.requestFileSystem(1,0,function(a){return a.root.getDirectory(e,f,function(a){var c;return a.getFile("cacheCrypt.json",f,function(a){return i._entry=a,a.file(function(a){var b;return b=new FileReader,b.onloadend=function(a){return"null"===a.target._result||""===a.target._result?(i.content={},c()):(i.content=JSON.parse(a.target._result),i.set="undefined"!=typeof i.content[l]?!0:!1,c())},b.readAsText(a)})},function(){throw new Error("#011 : crypt test file error")}),c=function(){return a.getFile(l+".cache",f,function(a){return j=a,null===h?g.read(function(a){return h=a.target._result,m=!0,b()}):void 0},function(){throw new Error("#006 : Directory error")})}},function(){throw new Error("#005 : fileSystem error")})},function(){throw new Error("#004 : Request error")})},c=function(){function a(a,b){var c,d,e;return e=(new Date).getTime(),c=""===h?{}:JSON.parse(h),c.hasOwnProperty(a)||(c[a]={content:"",details:{created:e,updated:e,crypt:b}}),d={get:function(){return b?i.decrypt(c[a].content):c[a].content},put:function(d){if("string"!=typeof d)throw new TypeError("#101 : user error, put($1) $1 must be a string");return c[a].content=b?i.encrypt(d):d,this},details:function(){return c[a].details},rm:function(){var b;return b=JSON.parse(h),delete b[a],c=b,g.write(JSON.stringify(b),function(){return!0})},save:function(b){var d;if(d=(new Date).getTime(),"undefined"!=typeof b&&"function"!=typeof b)throw new TypeError("#102 : user error, save($1) $1 must be a function or empty");return c[a].details.updated=d,g.write(JSON.stringify(c),b||function(){return c[a].content})}}}return a}(),d=function(){function b(){if("object"!=typeof a.CryptoJS)throw new Error("#012 : CryptoJS library required")}return b.prototype.init=function(a,b,c){var d;if(this.isset()===!1)throw new Error("Cryption password is not set up yet: use crypt.setPwd()");if("string"!=typeof a||"function"!=typeof b||"function"!=typeof c)throw new Error("crypt.init $1 must be string, $2 must be function, $3 must be function");i.password=a;try{return d=JSON.parse(i.decrypt(i.content[l])),d.test?(i.set=!0,i.passTest=!0,b()):c()}catch(e){return c()}},b.prototype.isset=function(){return i.set},b.prototype.setPwd=function(a,b){if(this.isset()===!0)throw new Error("#015 : Password has already been set, use .init or .chngPwd");if("string"!=typeof a||"function"!=typeof b)throw new Error("crypt.setPwd , $1 must be a string, $2 must be function");return i.set=!0,i.password=a,i.content[l]=i.encrypt(JSON.stringify({test:!0})),i.write(JSON.stringify(i.content),b)},b}(),b=function(b,e){var f;if("string"!=typeof b||"function"!=typeof e)throw new Error("#001 : codovaCache params Error , $1 = string $2 = function");if(null!==l)throw new Error("#002 : id is already set");if(l=b,"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)throw new Error("#007 : JSON not available");if(f={rmAll:function(a){if(null!==typeof a&&"function"!=typeof a)throw new Error("#018 : rmAll param to be function or empty");return g.write(JSON.stringify({}),a||function(){})},list:function(){var a,b,c;if(""===h)return[];c=JSON.parse(h),b=[];for(a in c)b.push(a);return b},container:function(a,b){if(null==b&&(b=!1),"boolean"!=typeof b)throw new Error("#018 , container cryption must be true or false");if(b&&!i.passTest)throw new Error("#023 , You must have a success crypt.init before you can use it.");return new c(a,b)}},"function"!=typeof a.requestFileSystem)throw new Error("ErrorCode #003 : FileSystem not available");return k(function(){return e(f,new d)})},"function"==typeof a.jQuery&&(jQuery.cordovaCache=b),"object"==typeof a.angular&&angular.module("SI.cordova",[]).factory("cordovaCache",function(){return b}),"function"==typeof a.define&&a.define.amd&&define("cordovaCache",[],function(){return b}),"function"!=typeof a.jQuery&&"object"!=typeof a.angular&&"function"!=typeof a.define&&(a.SI=a.SI||{},a.SI.cordovaCache=b),null}(window);
//# sourceMappingURL=cordovaCache.min.map